(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34c6eaf8","chunk-2d0d83b8"],{"79cc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.questions?a("div",{staticClass:"relative w-full overflow-y-auto m-4 flex flex-col"},[t._l(Object.keys(t.questions),(function(e,s){return[s>=t.start&&s<=t.start+t.limit?a("div",{staticClass:"flex flex-row mb-1 items-center"},[a("div",{staticClass:"w-10 text-right text-lg bg-gray-200 pr-2 mr-2 p-1"},[t._v(t._s(e))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.questions[e].domanda,expression:"questions[question].domanda"}],staticClass:"bg-white w-9/12 p-1r",staticStyle:{"font-family":"'Arial'"},attrs:{type:"text"},domProps:{value:t.questions[e].domanda},on:{input:function(a){a.target.composing||t.$set(t.questions[e],"domanda",a.target.value)}}}),t._m(0,!0)]):t._e()]})),a("div",{staticClass:"w-full flex flex-row items-center p-2 justify-center"},[a("button",{staticClass:"rounded-bl rounded-tl",on:{click:function(e){t.start>0&&(t.start=t.start-t.limit)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_left")])]),a("button",{staticClass:"rounded-tr rounded-br",on:{click:function(e){t.start+t.limit<t.total&&(t.start=t.start+t.limit)}}},[a("i",{staticClass:"material-icons"},[t._v("chevron_right")])])]),a("div",{staticClass:"w-full flex flex-row items-center p-2 justify-center"},[a("button",{staticClass:"rounded success",on:{click:t.save}},[t._v("Salva Quesiti")])])],2):t._e()},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-2/12 p-1 text-gray-500"},[a("i",{staticClass:"material-icons"},[t._v("delete")])])}],n=(a("7db0"),a("b64b"),{data:function(){return{questions:null,currentIndex:-1,start:0,limit:10,total:0,edit:!1}},computed:{},methods:{save:function(){}},mounted:function(){var t=this;this.$api.service("questions").find({query:{id:this.$attrs.survey}}).then((function(e){t.$store.dispatch("dataset",{table:"questions",data:e.data[0].questions}),t.questions=e.data[0].questions,t.total=Object.keys(t.questions).length}))}}),o=n,r=a("2877"),l=Object(r["a"])(o,s,i,!1,null,null,null);e["default"]=l.exports},b9a1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-2"},[a("button",{class:0===t.tab?"bg-blue-400":"",on:{click:function(e){t.tab=0}}},[t._v("Generale")]),a("button",{class:2===t.tab?"bg-blue-400":"",on:{click:function(e){t.tab=2}}},[t._v("Risposte")]),a("button",{class:3===t.tab?"bg-blue-400":"",on:{click:function(e){t.tab=3}}},[t._v("Domande")]),a("button",{class:1===t.tab?"bg-blue-400":"",on:{click:function(e){t.tab=1}}},[t._v("Descrizione")]),t.schema?a("div",{staticClass:"grid grid-cols-2 gap-4 p-8 border rounded"},[t._l(Object.keys(t.schema),(function(e){return[t.schema[e].tab===t.tab&&"boolean"!=t.schema[e].type?a("div",{staticClass:"flex flex-col",class:"text"===t.schema[e].type?"col-span-2":""},[a("label",{staticClass:"font-bold capitalize"},[t._v(t._s(t.schema[e].label))]),t.schema[e].tab===t.tab&&"string"===t.schema[e].type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.record[e],expression:"record[field]"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:t.record[e]},on:{input:[function(a){a.target.composing||t.$set(t.record,e,a.target.value)},function(e){return t.$emit(e.target.value)}]}}):t._e(),t.schema[e].tab===t.tab&&"number"===t.schema[e].type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.record[e],expression:"record[field]"}],staticClass:"w-full",attrs:{type:"number",min:"1"},domProps:{value:t.record[e]},on:{input:[function(a){a.target.composing||t.$set(t.record,e,a.target.value)},function(e){return t.$emit(e.target.value)}]}}):t._e(),"excerpt"===t.schema[e].type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.record[e],expression:"record[field]"}],staticClass:"w-full",domProps:{value:t.record[e]},on:{input:function(a){a.target.composing||t.$set(t.record,e,a.target.value)}}}):t._e(),t.schema[e].tab===t.tab&&"text"===t.schema[e].type?a("div",["text"===t.schema[e].type?a("v-editor",{staticClass:"w-full",model:{value:t.$attrs.value.description,callback:function(e){t.$set(t.$attrs.value,"description",e)},expression:"$attrs.value.description"}}):t._e()],1):t._e(),t.schema[e].tab===t.tab&&"array"===t.schema[e].type?a("div",[t._l(t.$attrs.value[e],(function(s,i){return[a("div",{staticClass:"flex flex-row"},[a("input",{staticClass:"w-full",attrs:{type:"text"},domProps:{value:s},on:{input:function(a){return t.updateArray(i,e,a.target.value)}}}),t._v(" "),a("i",{staticClass:"material-icons ml-2",on:{click:function(a){return t.removeOption(i,e)}}},[t._v("delete")])])]})),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newOption[e],expression:"newOption[field]"}],staticClass:"mr-2",attrs:{type:"text"},domProps:{value:t.newOption[e]},on:{input:function(a){a.target.composing||t.$set(t.newOption,e,a.target.value)}}}),a("button",{on:{click:function(a){return t.addOption(e)}}},[t._v("Aggiungi")])],2):t._e(),t.schema[e].tab===t.tab&&"date"===t.schema[e].type?a("div",[a("input",{staticClass:"w-24",attrs:{type:"text"},domProps:{value:t.dateField(e,t.$attrs.value[e])},on:{blur:function(a){return t.updateField(e,a.target.value)}}})]):t._e()]):t._e(),t.schema[e].tab===t.tab&&"boolean"===t.schema[e].type?a("div",{staticClass:"flex flex-row justify-start"},["boolean"===t.schema[e].type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.record[e],expression:"record[field]"}],staticClass:"mr-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.record[e])?t._i(t.record[e],null)>-1:t.record[e]},on:{input:function(e){return t.$emit(e.target.value)},change:function(a){var s=t.record[e],i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.record,e,s.concat([o])):r>-1&&t.$set(t.record,e,s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.record,e,n)}}}):t._e(),a("span",{staticClass:"ml-2 capitalize"},[t._v(t._s(t.schema[e].label))])]):t._e()]})),3===t.tab?a("div",{staticClass:"w-full col-span-2"},[a("survey-questions",{attrs:{survey:t.$attrs.value._id}})],1):t._e()],2):t._e(),a("transition",{attrs:{name:"fade"}},[t.editor?a("moka-modal",{attrs:{size:"lg",position:"modal"},on:{close:function(e){t.editor=!t.editor}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Editor")]),a("div",{attrs:{slot:"content"},slot:"content"},[a("v-editor",{model:{value:t.$attrs.value.description,callback:function(e){t.$set(t.$attrs.value,"description",e)},expression:"$attrs.value.description"}})],1)]):t._e()],1)],1)},i=[],n=(a("1276"),a("ac1f"),a("a434"),a("7db0"),a("b64b"),a("fda7")),o=a("1816"),r=a("79cc"),l={name:"TSISurveyAdmin",components:{VEditor:o["default"],SurveyQuestions:r["default"]},props:["data"],data:function(){return{editor:!1,tab:0,record:{},domande:null,editDomande:!1,total:0,newOption:{},newOptionValue:""}},computed:{schema:function(){return n["default"].questionario}},methods:{dateField:function(t,e){console.log(e);var a=this.schema[t].format(e);return a},updateArray:function(t,e,a){this.$attrs.value[e][t]=a,console.log(t,this.$attrs.value[e][t],a)},updateField:function(t,e){var a=e.split("/");a=a[2]+a[1]+a[0],this.$attrs.value[t]=a},addOption:function(t){this.$attrs.value[t].push(this.newOption[t])},removeOption:function(t,e){console.log(t,e),this.$attrs.value[e].splice(t,1)},getDomande:function(){var t=this;this.$api.service("questions").find({query:{id:this.$attrs.value.id}}).then((function(e){t.domande=e.data[0],t.total=Object.keys(t.domande.questions).length}))}},mounted:function(){this.record=this.$attrs.value,this.getDomande()}},c=l,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null);e["default"]=d.exports}}]);